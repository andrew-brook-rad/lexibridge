<project_specification>
  <project_name>LexiBridge Public - Multilingual Interlinear Bible Reader</project_name>
  <branch>public-main</branch>

  <overview>
    Build a simple, elegant public-facing website for reading interlinear Bible texts in multiple languages.
    The site displays pre-generated interlinear data (from TSV files) in a beautiful, readable format
    with easy navigation between books, chapters, and verses.

    **PRIMARY GOAL:** Make it easy to read and study interlinear Bible texts online.

    **MULTI-LANGUAGE SUPPORT:**
    - Source language: German (Luther Bible 1912)
    - Target/gloss languages: English (initial), Spanish, French, and others to be added
    - Each target language has its own set of TSV files
    - User can select which gloss language to display alongside German text

    **KEY FEATURES:**
    - Beautiful typography with configurable font size and font family
    - Page-by-page navigation (next/previous)
    - Quick navigation to any book, chapter, and verse
    - Responsive design for desktop and mobile
    - Clean, distraction-free reading experience

    **KEEP IT SIMPLE:**
    - Static site generation where possible
    - No authentication required
    - No AI/translation features (data is pre-generated)
    - Minimal dependencies
  </overview>

  <technology_stack>
    <framework>Next.js 14+ with App Router (TypeScript)</framework>
    <styling>Tailwind CSS + shadcn/ui components</styling>
    <ui_components>
      shadcn/ui - Use for consistent, accessible UI components:
      - Select/Dropdown for book and chapter selection
      - Dialog/Sheet for settings panel and mobile navigation
      - Button for navigation controls
      - Slider for font size adjustment
      - Tabs for OT/NT book grouping
      - Command (cmdk) for quick search/jump functionality
      - Popover for tooltips and quick actions
    </ui_components>
    <state>React Hooks + LocalStorage (for user preferences)</state>
    <data_source>Pre-generated TSV files in tools/interlinear/output/</data_source>
  </technology_stack>

  <data_format>
    <!-- TSV files contain interlinear data in this format -->
    <tsv_structure>
      Each line: book_code TAB chapter:verse TAB interlinear_text
      Interlinear text format: GermanWord|GLOSS GermanWord|GLOSS ...

      Example (English glosses): gen	1:1	Am|IN Anfang|BEGINNING schuf|CREATED Gott|GOD ...
      Example (Spanish glosses): gen	1:1	Am|EN Anfang|PRINCIPIO schuf|CREÓ Gott|DIOS ...
      Example (French glosses): gen	1:1	Am|AU Anfang|COMMENCEMENT schuf|CRÉA Gott|DIEU ...
    </tsv_structure>

    <language_organization>
      TSV files organized by target/gloss language:
      - tools/interlinear/output/english/{book}.tsv (initial implementation)
      - tools/interlinear/output/spanish/{book}.tsv (future)
      - tools/interlinear/output/french/{book}.tsv (future)
      - tools/interlinear/output/portuguese/{book}.tsv (future)
    </language_organization>

    <available_gloss_languages>
      - english: English glosses - Full Bible (66 books)
      - spanish: Spanish glosses - Full Bible (66 books) [future]
      - french: French glosses - Full Bible (66 books) [future]
      - portuguese: Portuguese glosses - Full Bible (66 books) [future]
    </available_gloss_languages>

    <available_books>
      <!-- All 66 Bible books with 3-letter codes -->
      OT: gen, exo, lev, num, deu, jos, jdg, rut, 1sa, 2sa, 1ki, 2ki, 1ch, 2ch,
          ezr, neh, est, job, psa, pro, ecc, sng, isa, jer, lam, ezk, dan,
          hos, jol, amo, oba, jon, mic, nam, hab, zep, hag, zec, mal
      NT: mat, mrk, luk, jhn, act, rom, 1co, 2co, gal, eph, php, col, 1th, 2th,
          1ti, 2ti, tit, phm, heb, jas, 1pe, 2pe, 1jn, 2jn, 3jn, jud, rev
    </available_books>
  </data_format>

  <core_features>
    <navigation>
      - **Book Selector:** Dropdown or sidebar listing all 66 books (grouped OT/NT)
      - **Chapter Selector:** Quick jump to any chapter in the current book
      - **Verse Jump:** Input field to jump directly to a specific verse
      - **Next/Previous Page:** Navigate sequentially through the text
      - **URL Routing:** Deep links like /read/jhn/3/16 for John 3:16
    </navigation>

    <reading_view>
      - **Interlinear Display:** German text on top, English gloss below (ruby-style)
      - **Verse Numbers:** Clear, non-intrusive verse markers (superscript red)
      - **Chapter Headers:** Clear chapter number at the start of each chapter
      - **Paragraph Flow:** Text flows naturally with justified alignment
    </reading_view>

    <user_preferences>
      - **Font Size:** Slider or buttons to adjust (small/medium/large/x-large)
      - **Font Family:** Choose between serif and sans-serif options
        - Serif options: Georgia, Times New Roman, Garamond
        - Sans-serif options: Arial, Helvetica, Open Sans
      - **Gloss Language:** Select which translation language to display (English, Spanish, French, etc.)
      - **Preferences Persistence:** Save to localStorage so settings persist
    </user_preferences>

    <gloss_language_selection>
      - **Language Picker:** Selector for gloss/translation language
      - **Available Languages:** English, Spanish, French, Portuguese (expandable)
      - **Availability Indicator:** Show which books are available in each language
      - **Fallback:** If a book isn't available in selected language, show message with option to switch
      - **URL Structure:** Language is part of the URL path for shareability
    </gloss_language_selection>
  </core_features>

  <ui_layout>
    <header>
      - Site title: "LexiBridge - German-English Interlinear Bible"
      - Current location breadcrumb: "Matthew > Chapter 5 > Verse 1"
      - Settings icon (opens preferences panel)
    </header>

    <sidebar_or_nav>
      - Book list (collapsible OT/NT sections)
      - Chapter list for current book
      - Quick verse jump input
    </sidebar_or_nav>

    <main_reading_area>
      - Chapter header (e.g., "Chapter 5")
      - Interlinear text content
      - Smooth scrolling within chapter
    </main_reading_area>

    <footer_navigation>
      - Previous page/chapter button
      - Current position indicator
      - Next page/chapter button
    </footer_navigation>

    <settings_panel>
      - Font size control (slider: 12px - 24px)
      - Font family selector (dropdown)
      - Theme toggle (light/dark) - optional nice-to-have
    </settings_panel>
  </ui_layout>

  <typography>
    <german_text>
      - Primary text (larger)
      - User-selected font family
      - User-selected font size
    </german_text>

    <english_gloss>
      - Secondary text (smaller, ~60-70% of German size)
      - Uppercase for literal translations
      - Slightly muted color (gray) to distinguish from German
    </english_gloss>

    <verse_numbers>
      - Superscript
      - Red or accent color
      - Small size (~60% of base)
      - Non-breaking with following word
    </verse_numbers>
  </typography>

  <routes>
    /                       - Home page with introduction and language/book selection
    /read                   - Redirects to first book in default language (English Genesis 1)
    /read/[lang]            - Language home (e.g., /read/english, /read/spanish)
    /read/[lang]/[book]     - First chapter of specified book with glosses in [lang]
    /read/[lang]/[book]/[chapter]  - Specific chapter
    /read/[lang]/[book]/[chapter]/[verse] - Specific verse (scrolls to and highlights)

    Examples:
    /read/english/gen/1     - Genesis 1 with English glosses
    /read/spanish/psa/23    - Psalm 23 with Spanish glosses
    /read/french/jhn/1      - John 1 with French glosses
  </routes>

  <success_criteria>
    <usability>
      - User can navigate to any verse in under 3 clicks
      - Font size changes are immediately visible
      - Navigation works smoothly on mobile devices
      - Page loads quickly (< 2 seconds)
    </usability>

    <visual>
      - Text is easy to read at default settings
      - German and English are clearly distinguishable
      - Verse numbers don't disrupt reading flow
      - Consistent styling across all books
    </visual>
  </success_criteria>

  <feature_count>
    Generate approximately 30-40 features. Focus on:
    - Navigation (40% of features)
    - Reading experience / typography (30% of features)
    - User preferences (20% of features)
    - Responsive design (10% of features)
  </feature_count>
</project_specification>
